<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>canvas基础 | 随时奉陪</title><meta name="author" content="随时奉陪"><meta name="copyright" content="随时奉陪"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. canvas 简介canvas 是 HTML5 新增的，一个可以使用脚本(通常为 JavaScript )在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。 它最初由苹果内部使用自己 MacOS X WebKit 推出，"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://metabo6.github.io/posts/a90c89c3"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'canvas基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-24 12:54:44'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly/index.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-tags"></i><span> 仿 win10</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-folder-open"></i><span> 学习资料</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-fish"></i><span> 摸鱼</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-tools"></i><span> 工具</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-anchor"></i><span> 动画</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-place-of-worship"></i><span> 摸鱼大军</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-31-49.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">随时奉陪</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-tags"></i><span> 仿 win10</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-folder-open"></i><span> 学习资料</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-fish"></i><span> 摸鱼</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-tools"></i><span> 工具</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-anchor"></i><span> 动画</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-place-of-worship"></i><span> 摸鱼大军</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">canvas基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-24T02:04:19.000Z" title="发表于 2022-10-24 10:04:19">2022-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-24T04:54:44.151Z" title="更新于 2022-10-24 12:54:44">2022-10-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>25分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="canvas基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-canvas-简介"><a href="#1-canvas-简介" class="headerlink" title="1. canvas 简介"></a>1. canvas 简介</h2><p><code>canvas</code> 是 HTML5 新增的，一个可以使用脚本(通常为 JavaScript )在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。</p>
<p>它最初由苹果内部使用自己 MacOS X WebKit 推出，供应用程序使用像仪表盘的构件和 Safari 浏览器使用。 后来，有人通过 Gecko 内核的浏览器 (尤其是 Mozilla 和 Firefox )，Opera 和 Chrome 和超文本网络应用技术工作组建议为下一代的网络技术使用该元素。</p>
<p>Canvas 是由 HTML 代码配合高度和宽度属性而定义出的可绘制区域。JavaScript 代码可以访问该区域，类似于其他通用的二维 API，通过一套完整的绘图函数来动态生成图形。</p>
<h2 id="2-Canvas-基本使用"><a href="#2-Canvas-基本使用" class="headerlink" title="2. Canvas 基本使用"></a>2. Canvas 基本使用</h2><h3 id="2-1-canvas-元素"><a href="#2-1-canvas-元素" class="headerlink" title="2.1 canvas 元素"></a>2.1 <code>canvas </code>元素</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>canvas</code> 看起来和 <code>img</code>标签一样，只是 <code>canvas</code> 只有两个可选的属性 width、heigth 属性，而没有 src、alt 属性。</p>
<p><strong>注意</strong>：与 <code>img</code>元素不同，<code>canvas</code>元素<strong>需要</strong>结束标签(<code>&lt;/canvas&gt;</code>)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。</p>
<p>如果不给 <code>canvas</code> 设置 widht、height 属性时，则默认 width 为 300、height 为 150,单位都是 px。也可以使用 css 属性来设置宽高，但是如宽高属性和初始比例不一致，他会出现扭曲。所以，建议永远不要使用 css 属性来设置 canvas 的宽高。</p>
<p>由于某些较老的浏览器（尤其是 IE9 之前的 IE 浏览器）或者浏览器不支持 HTML 元素<code>canvas</code>，在这些浏览器上你应该总是能展示替代内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span> 你的浏览器不支持canvas,请升级你的浏览器 <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>支持 <code>canvas</code> 的浏览器会只渲染 <code>canvas</code> 标签，而忽略其中的替代内容。不支持 <code> canvas</code> 的浏览器则 会直接渲染替代内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./美女.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-渲染上下文-Thre-Rending-Context"><a href="#2-2-渲染上下文-Thre-Rending-Context" class="headerlink" title="2.2 渲染上下文(Thre Rending Context)"></a>2.2 渲染上下文(Thre Rending Context)</h3><p><code>canvas</code>会创建一个固定大小的画布，会公开一个或多个 <strong>渲染上下文</strong>(画笔)，使用 <strong>渲染上下文</strong>来绘制和处理要展示的内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tutorial&#x27;</span>)</span><br><span class="line"><span class="comment">// 获得 2d 上下文对象</span></span><br><span class="line"><span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-3-检测支持性"><a href="#2-3-检测支持性" class="headerlink" title="2.3 检测支持性"></a>2.3 检测支持性</h3><p>检测当前浏览器是否支持 canvas</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">	<span class="comment">// drawing code here</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="comment">// canvas-unsupported code here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-绘制形状"><a href="#3-绘制形状" class="headerlink" title="3. 绘制形状"></a>3. 绘制形状</h2><h3 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h3><p><code>canvas</code> 只支持一种原生的 图形绘制：矩形。所有其他图形都至少需要生成一种路径( <code>path</code>)。不过，我们拥有众多路径生成的方法让复杂图形的绘制成为了可能。</p>
<blockquote>
<p><code>canvas</code>t 提供了三种方法绘制矩形</p>
</blockquote>
<ol>
<li><p><code>fillRect(x, y, width, height)</code></p>
<p>绘制一个填充的矩形</p>
</li>
<li><p><code>strokeRect(x, y, width, height)</code></p>
<p>绘制一个矩形的边框</p>
</li>
<li><p><code>clearRect(x, y, widh, height)</code></p>
<p>清除指定的矩形区域，然后这块区域会变的完全透明。</p>
</li>
</ol>
<p><strong>说明</strong>：</p>
<p>这 3 个方法具有相同的参数。 <code>x, y</code>：指的是矩形的左上角的坐标。(相对于<code>canvas</code>的坐标原点)</p>
<p><code>width, height</code>：指的是绘制的矩形的宽和高。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：需先配置颜色再来绘制矩形，否则生成的矩形是默认黑色</span></span><br><span class="line">ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;green&#x27;</span> <span class="comment">// 矩形颜色</span></span><br><span class="line">ctx.<span class="title function_">fillRect</span>(<span class="number">300</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>) <span class="comment">//绘制矩形</span></span><br><span class="line">ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;#f00&#x27;</span> <span class="comment">// 边框颜色</span></span><br><span class="line">ctx.<span class="title function_">strokeRect</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>) <span class="comment">// 矩形边框</span></span><br><span class="line">ctx.<span class="title function_">clearRect</span>(<span class="number">300</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">50</span>) <span class="comment">// 清除画布</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/10-29-08.png"></p>
<h2 id="4-绘制路径-path"><a href="#4-绘制路径-path" class="headerlink" title="4. 绘制路径(path)"></a>4. 绘制路径(<code>path</code>)</h2><blockquote>
<p>图形的基本元素是路径。</p>
</blockquote>
<p>路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。</p>
<p>一个路径，甚至一个子路径，都是闭合的。</p>
<blockquote>
<p>使用路径绘制图形需要一些额外的步骤：</p>
</blockquote>
<ol>
<li>创建路径起始点</li>
<li>调用绘制方法去绘制出路径</li>
<li>把路径封闭</li>
<li>一旦路径生成，通过描边或填充路径区域来渲染图形。</li>
</ol>
<blockquote>
<p>下面是需要用到的方法</p>
</blockquote>
<ol>
<li><p>beginPath()</p>
<p>新建一条路径，路径一旦创建成功，图形绘制命令被指向到路径上生成路径</p>
</li>
<li><p>moveTo(x, y)</p>
<p>把画笔移动到指定的坐标(x, y)。相当于设置路径的起始点坐标。</p>
</li>
<li><p>closePath()</p>
<p>闭合路径之后，图形绘制命令又重新指向到上下文中</p>
</li>
<li><p>stroke()</p>
<p>通过线条来绘制图形轮廓</p>
</li>
<li><p>fill()</p>
<p>通过填充路径的内容区域生成实心的图形</p>
</li>
</ol>
<h3 id="4-1-绘制线段"><a href="#4-1-绘制线段" class="headerlink" title="4.1 绘制线段"></a>4.1 绘制线段</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">	<span class="keyword">if</span> (!canvas.<span class="property">getContext</span>) <span class="keyword">return</span></span><br><span class="line">	<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">	ctx.<span class="title function_">beginPath</span>() <span class="comment">//新建一条 path</span></span><br><span class="line">	ctx.<span class="title function_">moveTo</span>(<span class="number">50</span>, <span class="number">50</span>) <span class="comment">//把画笔移动到指定的坐标</span></span><br><span class="line">	ctx.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">50</span>) <span class="comment">//绘制一条从当前位置到指定坐标(200, 50)的直线.</span></span><br><span class="line">	<span class="comment">//闭合路径。会画一条从当前点到 path 起始点的直线</span></span><br><span class="line">	ctx.<span class="title function_">closePath</span>()</span><br><span class="line">	ctx.<span class="title function_">stroke</span>() <span class="comment">//绘制路径。结束当前绘制</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">draw</span>()</span><br></pre></td></tr></table></figure>

<h3 id="4-2-绘制三角形边框"><a href="#4-2-绘制三角形边框" class="headerlink" title="4.2 绘制三角形边框"></a>4.2 绘制三角形边框</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 填充三角形</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawTriangle</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">400</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">	context.<span class="title function_">closePath</span>() <span class="comment">// 此处闭合路径，就会首尾相连形成三角形</span></span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fill</span>() <span class="comment">//填充闭合区域。如果 path 没有闭合，则 fill() 会自动闭合路径</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawTriangle</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/10-35-36.png" style="zoom:50%;" />

<h3 id="4-3-绘制圆弧"><a href="#4-3-绘制圆弧" class="headerlink" title="4.3 绘制圆弧"></a>4.3 绘制圆弧</h3><blockquote>
<p>有两个方法可以绘制圆弧：</p>
</blockquote>
<ol>
<li><p>arc(x, y, r, startAngle, endAngle, anticlockwise):</p>
<p>以(x, y)为圆心，以 r 为半径，从 startAngle 弧度开始到 endAngle 弧度结束。anticlosewise 是布尔值，true 表示逆时针，false 表示顺时针。(默认是顺时针)</p>
<p><strong>注意</strong>：这里的度数都是弧度。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">radians = (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) * degrees <span class="comment">//角度转换成弧度</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>arcTo(x1, y1, x2, y2, radius):</p>
<p>根据给定的控制点和半径画一段圆弧，最后再以直线连接两个控制点。</p>
</li>
</ol>
<p><strong>案例 1：钻石</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 圆弧</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawArt</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">	context.<span class="title function_">rotate</span>((<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">4</span>) * <span class="number">5</span>)</span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	<span class="comment">// 圆弧的 x , y , 半径, 起始角度,结束角度, 顺时针 false / 逆时针 true</span></span><br><span class="line">	context.<span class="title function_">arc</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line">	context.<span class="title function_">closePath</span>()</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fill</span>()</span><br><span class="line">	<span class="comment">// 三角形</span></span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">200</span>, <span class="number">0</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">0</span>, <span class="number">200</span>)</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="title function_">closePath</span>()</span><br><span class="line">	context.<span class="title function_">fill</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawArt</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_11-29-53.png"></p>
<p><strong>案例 2：圆弧</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tutorial&#x27;</span>)</span><br><span class="line">	<span class="keyword">if</span> (!canvas.<span class="property">getContext</span>) <span class="keyword">return</span></span><br><span class="line">	<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">	ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">	ctx.<span class="title function_">arc</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line">	ctx.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line">	ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">	ctx.<span class="title function_">arc</span>(<span class="number">150</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">0</span>, -<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="literal">true</span>)</span><br><span class="line">	ctx.<span class="title function_">closePath</span>() <span class="comment">// 加入这个 圆弧就会闭合</span></span><br><span class="line">	ctx.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line">	ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">	ctx.<span class="title function_">arc</span>(<span class="number">50</span>, <span class="number">150</span>, <span class="number">40</span>, -<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line">	ctx.<span class="title function_">fill</span>() <span class="comment">// 圆弧填充，默认是黑色</span></span><br><span class="line"></span><br><span class="line">	ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">	ctx.<span class="title function_">arc</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="literal">false</span>)</span><br><span class="line">	ctx.<span class="title function_">fill</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">draw</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_11-31-49.png"></p>
<p>案例三：<strong>线相切的圆弧</strong></p>
<p><code>arcTo</code>方法的说明：</p>
<p>这个方法可以这样理解。绘制的弧形是由两条切线所决定。</p>
<p>第 1 条切线：起始点和控制点 1 决定的直线。</p>
<p>第 2 条切线：控制点 1 和控制点 2 决定的直线。</p>
<p><strong>其实绘制的圆弧就是与这两条直线相切的圆弧。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两条直线相切的圆弧</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawArtTo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 相切圆弧</span></span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">205</span>, <span class="number">105</span>)</span><br><span class="line">	<span class="comment">// 参数1、2：控制点1坐标   参数3、4：控制点2坐标  参数4：圆弧半径</span></span><br><span class="line">	context.<span class="title function_">arcTo</span>(<span class="number">505</span>, <span class="number">105</span>, <span class="number">505</span>, <span class="number">505</span>, <span class="number">300</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">505</span>, <span class="number">500</span>)</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="title function_">closePath</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 起始点</span></span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">200</span>, <span class="number">100</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">210</span>, <span class="number">105</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">510</span>, <span class="number">105</span>)</span><br><span class="line">	context.<span class="property">lineWidth</span> = <span class="number">5</span></span><br><span class="line">	context.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 控制点1</span></span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">500</span>, <span class="number">100</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">505</span>, <span class="number">110</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">505</span>, <span class="number">500</span>)</span><br><span class="line">	context.<span class="property">lineWidth</span> = <span class="number">5</span></span><br><span class="line">	context.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 控制点2</span></span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">500</span>, <span class="number">500</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawArtTo</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_11-34-51.png" style="zoom:50%;" />

<h2 id="5-添加样式和颜色"><a href="#5-添加样式和颜色" class="headerlink" title="5. 添加样式和颜色"></a>5. 添加样式和颜色</h2><p>在前面的绘制矩形中，只用到了默认的线条和颜色。如果想要给图形上色，有两个重要的属性可以做到。</p>
<ol>
<li><p><code>fillStyle = color</code></p>
<p>设置图形的填充颜色</p>
</li>
<li><p><code>strokeStyle = color</code></p>
<p>设置图形轮廓的颜色</p>
</li>
</ol>
<p><strong>注意</strong>：</p>
<ol>
<li><p><code>color</code> 可以是表示 <code>css</code> 颜色值的字符串、渐变对象或者图案对象。</p>
</li>
<li><p>默认情况下，线条和填充颜色都是黑色。</p>
</li>
<li><p>一旦您设置了 <code>strokeStyle</code> 或者 <code>fillStyle</code> 的值，那么这个新值就会成为新绘制的图形的默认值。如果你要给每个图形上不同的颜色，你需要重新设置 <code>fillStyle</code> 或 <code>strokeStyle</code> 的值。</p>
</li>
</ol>
<h3 id="Transparency-透明度"><a href="#Transparency-透明度" class="headerlink" title="Transparency(透明度)"></a>Transparency(透明度)</h3><p><code>globalAlpha = transparencyValue</code></p>
<p>这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。</p>
<p>globalAlpha 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，使用 rgba()设置透明度更加好一些。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.globalAlpha = 0.5 // 画布整体透明度</span><br></pre></td></tr></table></figure>

<h3 id="line-style"><a href="#line-style" class="headerlink" title="line style"></a>line style</h3><p><code>lineWidth = value</code>：线宽。只能是正值。默认是<code>1.0</code>。</p>
<p>起始点和终点的连线为中心，<strong>上下各占线宽的一半</strong></p>
<h3 id="lineCap-x3D-type"><a href="#lineCap-x3D-type" class="headerlink" title="lineCap &#x3D; type"></a>lineCap &#x3D; type</h3><p>线条末端样式。共有 3 个值：</p>
<ol>
<li><code>butt</code>：线段末端以方形结束</li>
<li><code>round</code>：线段末端以圆形结束</li>
<li><code>square</code>：线段末端以方形结束，但是增加了一个宽度和线段相同，高度是线段厚度一半的矩形区域。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lineCaps = [<span class="string">&#x27;butt&#x27;</span>, <span class="string">&#x27;round&#x27;</span>, <span class="string">&#x27;square&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">	ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">	ctx.<span class="title function_">moveTo</span>(<span class="number">20</span> + <span class="number">30</span> * i, <span class="number">30</span>)</span><br><span class="line">	ctx.<span class="title function_">lineTo</span>(<span class="number">20</span> + <span class="number">30</span> * i, <span class="number">100</span>)</span><br><span class="line">	ctx.<span class="property">lineWidth</span> = <span class="number">20</span></span><br><span class="line">	ctx.<span class="property">lineCap</span> = lineCaps[i]</span><br><span class="line">	ctx.<span class="title function_">stroke</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">ctx.<span class="title function_">moveTo</span>(<span class="number">0</span>, <span class="number">30</span>)</span><br><span class="line">ctx.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">ctx.<span class="title function_">moveTo</span>(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">ctx.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">ctx.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">ctx.<span class="property">lineWidth</span> = <span class="number">1</span></span><br><span class="line">ctx.<span class="title function_">stroke</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_11-41-16.png" style="zoom:50%;" />

<h3 id="lineJoin-x3D-type"><a href="#lineJoin-x3D-type" class="headerlink" title="lineJoin &#x3D; type"></a>lineJoin &#x3D; type</h3><p><code>lineJoin = type</code>：同一个 path 内，设定线条与线条间接合处的样式。</p>
<p>共有 3 个值 round, bevel 和 miter：</p>
<ol>
<li>round</li>
</ol>
<p>通过填充一个额外的，圆心在相连部分末端的扇形，绘制拐角的形状。 圆角的半径是线段的宽度。</p>
<ol start="2">
<li>bevel</li>
</ol>
<p>在相连部分的末端填充一个额外的以三角形为底的区域， 每个部分都有各自独立的矩形拐角。</p>
<ol start="3">
<li>miter(默认)</li>
</ol>
<p>通过延伸相连部分的外边缘，使其相交于一点，形成一个额外的菱形区域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tutorial&#x27;</span>)</span><br><span class="line">	<span class="keyword">if</span> (!canvas.<span class="property">getContext</span>) <span class="keyword">return</span></span><br><span class="line">	<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> lineJoin = [<span class="string">&#x27;round&#x27;</span>, <span class="string">&#x27;bevel&#x27;</span>, <span class="string">&#x27;miter&#x27;</span>]</span><br><span class="line">	ctx.<span class="property">lineWidth</span> = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lineJoin.<span class="property">length</span>; i++) &#123;</span><br><span class="line">		ctx.<span class="property">lineJoin</span> = lineJoin[i]</span><br><span class="line">		ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">		ctx.<span class="title function_">moveTo</span>(<span class="number">50</span>, <span class="number">50</span> + i * <span class="number">50</span>)</span><br><span class="line">		ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">100</span> + i * <span class="number">50</span>)</span><br><span class="line">		ctx.<span class="title function_">lineTo</span>(<span class="number">150</span>, <span class="number">50</span> + i * <span class="number">50</span>)</span><br><span class="line">		ctx.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span> + i * <span class="number">50</span>)</span><br><span class="line">		ctx.<span class="title function_">lineTo</span>(<span class="number">250</span>, <span class="number">50</span> + i * <span class="number">50</span>)</span><br><span class="line">		ctx.<span class="title function_">stroke</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">draw</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_11-42-45.png"></p>
<h3 id="虚线"><a href="#虚线" class="headerlink" title="虚线"></a>虚线</h3><p>用 <code>setLineDash</code> 方法和 <code>lineDashOffset</code> 属性来制定虚线样式. <code>setLineDash</code> 方法接受一个数组，来指定线段与间隙的交替；<code>lineDashOffset</code>属性设置起始偏移量.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tutorial&#x27;</span>)</span><br><span class="line">	<span class="keyword">if</span> (!canvas.<span class="property">getContext</span>) <span class="keyword">return</span></span><br><span class="line">	<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">	ctx.<span class="title function_">setLineDash</span>([<span class="number">20</span>, <span class="number">5</span>]) <span class="comment">// [实线长度, 间隙长度]</span></span><br><span class="line">	ctx.<span class="property">lineDashOffset</span> = -<span class="number">0</span></span><br><span class="line">	ctx.<span class="title function_">strokeRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">210</span>, <span class="number">210</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">draw</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_11-43-38.png"></p>
<h2 id="6-绘制文本"><a href="#6-绘制文本" class="headerlink" title="6. 绘制文本"></a>6. 绘制文本</h2><p>canvas 提供了两种方法来渲染文本:</p>
<ol>
<li>fillText(text, x, y [, maxWidth])</li>
</ol>
<p>在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.</p>
<ol start="2">
<li>strokeText(text, x, y [, maxWidth])</li>
</ol>
<p>在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文字配置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawText</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	<span class="comment">// 文字 x 轴位置</span></span><br><span class="line">	context.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span></span><br><span class="line">	<span class="comment">// 文字 y 轴位置</span></span><br><span class="line">	context.<span class="property">textBaseline</span> = <span class="string">&#x27;middle&#x27;</span></span><br><span class="line">	<span class="comment">// 字体大小/样式</span></span><br><span class="line">	context.<span class="property">font</span> = <span class="string">&#x27;100px 微软雅黑&#x27;</span></span><br><span class="line">	<span class="comment">// 设置线性渐变 参数: 开始的 x y 坐标, 结束的 x y 坐标</span></span><br><span class="line">	<span class="keyword">const</span> gradient = context.<span class="title function_">createLinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">600</span>, <span class="number">0</span>)</span><br><span class="line">	gradient.<span class="title function_">addColorStop</span>(<span class="number">0</span>, <span class="string">&#x27;#000&#x27;</span>)</span><br><span class="line">	gradient.<span class="title function_">addColorStop</span>(<span class="number">0.5</span>, <span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">	gradient.<span class="title function_">addColorStop</span>(<span class="number">1</span>, <span class="string">&#x27;#f00&#x27;</span>)</span><br><span class="line">	<span class="comment">// 应用渐变色</span></span><br><span class="line">	context.<span class="property">strokeStyle</span> = gradient</span><br><span class="line">	context.<span class="property">fillStyle</span> = gradient</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 绘制实体文本,参数分别是: 文本内容,文本坐标,最大宽度(超出会挤压)</span></span><br><span class="line">	context.<span class="title function_">fillText</span>(<span class="string">&#x27;hello world!&#x27;</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">600</span>)</span><br><span class="line">	context.<span class="title function_">strokeText</span>(<span class="string">&#x27;你好 世界!&#x27;</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">600</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawText</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_11-45-41.png" style="zoom:50%;" />

<h3 id="文本添加样式"><a href="#文本添加样式" class="headerlink" title="文本添加样式"></a>文本添加样式</h3><p><code>font = value</code></p>
<p>当前我们用来绘制文本的样式。这个字符串使用和 CSS font 属性相同的语法. 默认的字体是 10px sans-serif。</p>
<p><code>textAlign = value</code></p>
<p>文本对齐选项. 可选的值包括：start, end, left, right or center. 默认值是 start。</p>
<p><code>textBaseline = value</code></p>
<p>基线对齐选项，可选的值包括：top, hanging, middle, alphabetic, ideographic, bottom。默认值是 alphabetic。</p>
<p><code>direction = value</code></p>
<p>文本方向。可能的值包括：ltr, rtl, inherit。默认值是 inherit。</p>
<h2 id="7-绘制图片"><a href="#7-绘制图片" class="headerlink" title="7. 绘制图片"></a>7. 绘制图片</h2><h3 id="7-1-直接创建图片"><a href="#7-1-直接创建图片" class="headerlink" title="7.1 直接创建图片"></a>7.1 直接创建图片</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawImg</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>() <span class="comment">// 创建一个&lt;img&gt;元素</span></span><br><span class="line">	img.<span class="property">src</span> = <span class="string">&#x27;02-田园小清新.jpg&#x27;</span> <span class="comment">// 设置图片源地址</span></span><br><span class="line">	<span class="comment">// 图片加载成功后绘制</span></span><br><span class="line">	img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 显示图片参数:图像实例 / 图像位置 ,会按照图片原尺寸展示</span></span><br><span class="line">		context.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawImg</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_11-55-10-1666584034779.png" style="zoom:50%;" />

<h3 id="7-2-绘制-img-标签图片"><a href="#7-2-绘制-img-标签图片" class="headerlink" title="7.2 绘制 img 标签图片"></a>7.2 绘制 <code>img</code> 标签图片</h3><p><code>img</code> 可以 <code>new</code> 也可以来源于我们页面的 <code>&lt;img&gt;</code>标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./美女.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;tutorial&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tutorial&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> (!canvas.<span class="property">getContext</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">draw</span>()</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-缩放图片"><a href="#7-3-缩放图片" class="headerlink" title="7.3 缩放图片"></a>7.3 缩放图片</h3><p><code>drawImage()</code> 也可以再添加两个参数：</p>
<p><code>drawImage(image, x, y, width, height)</code></p>
<p>这个方法多了 2 个参数：<code>width</code> 和 <code>height，</code>这两个参数用来控制 canvas 画入时应该缩放的大小</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawImg</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>() <span class="comment">// 创建一个&lt;img&gt;元素</span></span><br><span class="line">	img.<span class="property">src</span> = <span class="string">&#x27;02-田园小清新.jpg&#x27;</span> <span class="comment">// 设置图片源地址</span></span><br><span class="line">	<span class="comment">// 图片加载成功后绘制</span></span><br><span class="line">	img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 显示图片参数:图像实例 / 图像位置 / 图像宽高</span></span><br><span class="line">		context.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">320</span>, <span class="number">240</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawImg</span>()</span><br></pre></td></tr></table></figure>

<h3 id="7-4-切片-slice"><a href="#7-4-切片-slice" class="headerlink" title="7.4 切片(slice)"></a>7.4 切片(<code>slice</code>)</h3><p><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></p>
<p>第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。</p>
<p>其他参数：前 4 个是定义图像源的切片位置和大小，后 4 个则是定义切片的目标显示位置和大小。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawImg</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>() <span class="comment">// 创建一个&lt;img&gt;元素</span></span><br><span class="line">	img.<span class="property">src</span> = <span class="string">&#x27;02-田园小清新.jpg&#x27;</span> <span class="comment">// 设置图片源地址</span></span><br><span class="line">	<span class="comment">// 图片加载成功后绘制</span></span><br><span class="line">	img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 裁剪图片参数: 图像实例 /  前4个是定义图像源的切片位置和大小 / ​ 后4个则是定义切片的目标显示位置和大小</span></span><br><span class="line">		context.<span class="title function_">drawImage</span>(img, <span class="number">180</span>, <span class="number">500</span>, <span class="number">320</span>, <span class="number">240</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">320</span>, <span class="number">240</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawImg</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-04-18.png"></p>
<p>这是裁剪后的图片效果</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-06-19.png" style="zoom:50%;" />

<h2 id="8-状态的保存和恢复"><a href="#8-状态的保存和恢复" class="headerlink" title="8. 状态的保存和恢复"></a>8. 状态的保存和恢复</h2><p><code>Saving and restoring state </code> 是绘制复杂图形时必不可少的操作。</p>
<p><code>save</code> 和 <code>restore </code>方法是用来保存和恢复 canvas 状态的，都没有参数。</p>
<p>Canvas 的状态就是当前画面应用的所有样式和变形的一个快照。</p>
<ol>
<li><p>关于 save()</p>
<p>Canvas 状态存储在栈中，每当 save() 方法被调用后，当前的状态就被推送到栈中保存。一个绘画状态包括：</p>
</li>
</ol>
<ul>
<li><p>当前应用的变形（即移动，旋转和缩放）</p>
</li>
<li><p>strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation 的值</p>
</li>
<li><p>当前的裁切路径（clipping path）</p>
</li>
</ul>
<p>可以调用任意多次 save 方法。(类似数组的 push())</p>
<ol start="2">
<li><p>关于 restore()</p>
<p>每一次调用 restore 方法，上一个保存的状态就从栈中弹出，所有设定都恢复。(类似数组的 pop())</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储/读取 canvas 状态,都没有参数。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">save</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line"></span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">	<span class="comment">// 存储 canvas 状态,没有参数。</span></span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line"></span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">300</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">	<span class="comment">// context.save()</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 恢复(获取) canvas 状态,没有参数。</span></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">400</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">500</span>, <span class="number">400</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">save</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-10-27.png" style="zoom:50%;" />

<h2 id="9-变形"><a href="#9-变形" class="headerlink" title="9. 变形"></a>9. 变形</h2><h3 id="9-1-translate"><a href="#9-1-translate" class="headerlink" title="9.1 translate"></a>9.1 translate</h3><p><code>translate(x, y)</code></p>
<p>用来移动 canvas 的原点到指定的位置</p>
<p><code>translate</code> 方法接受两个参数。x 是左右偏移量，y 是上下偏移量，如右图所示。</p>
<p>在做变形之前先保存状态是一个良好的习惯。大多数情况下，调用 restore 方法比手动恢复原先的状态要简单得多。又如果你是在一个循环中做位移但没有保存和恢复 canvas 的状态，很可能到最后会发现怎么有些东西不见了，那是因为它很可能已经超出 canvas 范围以外了。</p>
<p><strong>注意</strong>：translate 移动的是 canvas 的坐标原点。(坐标变换)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-12-27.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置画布原点 translate 方法,可通过 save 方法先保存原有画布原点, 再来移动原点,后续可通过 restore 方法恢复原点</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawTranslate</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line"></span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawTranslate</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-13-42.png" style="zoom:50%;" />

<h3 id="9-2-rotate"><a href="#9-2-rotate" class="headerlink" title="9.2 rotate"></a>9.2 rotate</h3><p>旋转坐标轴。这个方法只接受一个参数：旋转的角度( angle )，它是顺时针方向的，以弧度为单位的值。 旋转的中心是坐标原点。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-15-09.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">drawRotate</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">300</span>, <span class="number">0</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">300</span>, <span class="number">600</span>)</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="title function_">beginPath</span>()</span><br><span class="line">	context.<span class="title function_">moveTo</span>(<span class="number">0</span>, <span class="number">300</span>)</span><br><span class="line">	context.<span class="title function_">lineTo</span>(<span class="number">600</span>, <span class="number">300</span>)</span><br><span class="line">	context.<span class="title function_">stroke</span>()</span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line">	<span class="comment">// 移动原点到中间</span></span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">	<span class="comment">// 旋转坐标轴</span></span><br><span class="line">	context.<span class="title function_">rotate</span>(<span class="title class_">Math</span>.<span class="property">PI</span>)</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line">	<span class="comment">// 恢复原有原点及坐标轴</span></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawRotate</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-16-49.png" style="zoom:50%;" />

<h3 id="9-3-scale"><a href="#9-3-scale" class="headerlink" title="9.3 scale"></a>9.3 scale</h3><p><code>scale(x, y)</code>。用它来增减图形在 canvas 中的像素数目，对形状，位图进行缩小或者放大。</p>
<p>scale 方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缩放画布 scale, 1 为原始尺寸, 0-1 之间为缩小, 大于1 为放大</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawScale</span>(<span class="params"></span>) &#123;</span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">	<span class="comment">// 缩放 0.5 倍,所有均缩放,包括坐标轴定位</span></span><br><span class="line">	context.<span class="title function_">scale</span>(<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">	<span class="comment">// 原始尺寸</span></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">	<span class="comment">// 放大 2 倍</span></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	context.<span class="title function_">scale</span>(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;gold&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">150</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawScale</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-19-12.png" style="zoom:50%;" />

<h2 id="10-动画"><a href="#10-动画" class="headerlink" title="10. 动画"></a>10. 动画</h2><ol>
<li>清空 canvas</li>
</ol>
<p>再绘制每一帧动画之前，需要清空所有。清空所有最简单的做法就是 clearRect() 方法</p>
<ol start="2">
<li>保存 canvas 状态</li>
</ol>
<p>如果在绘制的过程中会更改 canvas 的状态(颜色、移动了坐标原点等),又在绘制每一帧时都是原始状态的话，则最好保存下 canvas 的状态</p>
<ol start="3">
<li>绘制动画图形</li>
</ol>
<p>这一步才是真正的绘制动画帧</p>
<ol start="4">
<li>恢复 canvas 状态</li>
</ol>
<p>如果你前面保存了 canvas 状态，则应该在绘制完成一帧之后恢复 canvas 状态。</p>
<h3 id="控制动画"><a href="#控制动画" class="headerlink" title="控制动画"></a>控制动画</h3><p>我们可用通过 canvas 的方法或者自定义的方法把图像会知道到 canvas 上。正常情况，我们能看到绘制的结果是在脚本执行结束之后。例如，我们不可能在一个 for 循环内部完成动画。</p>
<p>也就是，为了执行动画，我们需要一些可以定时执行重绘的方法。</p>
<p>一般用到下面三个方法：</p>
<ul>
<li>setInterval()</li>
<li>setTimeout()</li>
<li>requestAnimationFrame()</li>
</ul>
<h4 id="案例-1：太阳系"><a href="#案例-1：太阳系" class="headerlink" title="案例 1：太阳系"></a>案例 1：太阳系</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 太阳系循环</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawSunSystem</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 画圆函数</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawCircle</span>(<span class="params">x, y, r, c, isFill</span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		isFill ? (context.<span class="property">fillStyle</span> = c) : (context.<span class="property">strokeStyle</span> = c)</span><br><span class="line">		context.<span class="title function_">arc</span>(x, y, r, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line">		isFill ? context.<span class="title function_">fill</span>() : context.<span class="title function_">stroke</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 清除画布</span></span><br><span class="line">	context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line"></span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line">	<span class="comment">// 太阳及光芒</span></span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">300</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="string">&#x27;gold&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">300</span>, <span class="number">300</span>, <span class="number">100</span>, <span class="string">&#x27;rgba(181,181,181,0.1)&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">	<span class="comment">// 保存状态</span></span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 地球轨道</span></span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="string">&#x27;green&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">	<span class="comment">// 地球</span></span><br><span class="line">	context.<span class="title function_">rotate</span>((time.<span class="title function_">getSeconds</span>() + time.<span class="title function_">getMilliseconds</span>() / <span class="number">1000</span>) / <span class="number">10</span>)</span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">200</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">25</span>, <span class="string">&#x27;rgb(82 129 233)&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 月球轨道</span></span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">60</span>, <span class="string">&#x27;green&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// // 月球</span></span><br><span class="line">	context.<span class="title function_">rotate</span>((time.<span class="title function_">getSeconds</span>() + time.<span class="title function_">getMilliseconds</span>() / <span class="number">1000</span>) * <span class="number">5</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">60</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="string">&#x27;rgb(82 129 233)&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">	<span class="comment">// 恢复开始状态</span></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	<span class="comment">// 循环动画</span></span><br><span class="line">	<span class="title function_">requestAnimationFrame</span>(drawSunSystem)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawSunSystem</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-24-33.png" style="zoom:50%;" />

<h4 id="案例-2：时钟走动"><a href="#案例-2：时钟走动" class="headerlink" title="案例 2：时钟走动"></a>案例 2：时钟走动</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时钟转动</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawClock</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawLine</span>(<span class="params">x1, y1, x2, y2, w, c = <span class="string">&#x27;#000&#x27;</span></span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		context.<span class="title function_">moveTo</span>(x1, y1)</span><br><span class="line">		context.<span class="title function_">lineTo</span>(x2, y2)</span><br><span class="line">		context.<span class="property">strokeStyle</span> = c</span><br><span class="line">		context.<span class="property">lineWidth</span> = w</span><br><span class="line">		context.<span class="title function_">stroke</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawCircle</span>(<span class="params">x, y, r, c = <span class="string">&#x27;red&#x27;</span></span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		context.<span class="property">fillStyle</span> = c</span><br><span class="line">		context.<span class="title function_">arc</span>(x, y, r, -<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, (<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) * <span class="number">3</span>, <span class="literal">false</span>)</span><br><span class="line">		context.<span class="title function_">fill</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawText</span>(<span class="params">t, x, y, s = <span class="string">&#x27;20&#x27;</span></span>) &#123;</span><br><span class="line">		context.<span class="property">font</span> = <span class="string">`<span class="subst">$&#123;s&#125;</span>px 微软雅黑`</span></span><br><span class="line">		context.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span></span><br><span class="line">		context.<span class="property">textBaseline</span> = <span class="string">&#x27;middle&#x27;</span></span><br><span class="line">		context.<span class="title function_">fillText</span>(t, x, y, <span class="number">200</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 外框</span></span><br><span class="line">	context.<span class="property">fillStyle</span> = <span class="string">&#x27;#ccc&#x27;</span></span><br><span class="line">	context.<span class="title function_">fillRect</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">	context.<span class="title function_">save</span>()</span><br><span class="line">	<span class="comment">// 时钟内容</span></span><br><span class="line">	context.<span class="title function_">translate</span>(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">140</span>, <span class="string">&#x27;#fff&#x27;</span>)</span><br><span class="line">	<span class="title function_">drawCircle</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="string">&#x27;#000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 刻度</span></span><br><span class="line">	<span class="comment">// 设置 x 坐标：当前 x 坐标 * Math.cos(Math.PI * 2 / 60 * i - Math.PI / 2)</span></span><br><span class="line">	<span class="comment">// 设置 y 坐标：当前 y 坐标 * Math.sin(Math.PI * 2 / 60 * i - Math.PI / 2)</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">let</span> d = ((<span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>) / <span class="number">60</span>) * i - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span></span><br><span class="line">		<span class="keyword">const</span> x1 = <span class="number">140</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(d)</span><br><span class="line">		<span class="keyword">const</span> y1 = <span class="number">140</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(d)</span><br><span class="line">		<span class="keyword">const</span> x2 = i % <span class="number">5</span> === <span class="number">0</span> ? <span class="number">125</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(d) : <span class="number">130</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(d)</span><br><span class="line">		<span class="keyword">const</span> y2 = i % <span class="number">5</span> === <span class="number">0</span> ? <span class="number">125</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(d) : <span class="number">130</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(d)</span><br><span class="line">		<span class="keyword">const</span> w = i % <span class="number">5</span> === <span class="number">0</span> ? <span class="number">4</span> : <span class="number">2</span></span><br><span class="line">		<span class="keyword">const</span> c = i % <span class="number">5</span> === <span class="number">0</span> ? <span class="string">&#x27;#f00&#x27;</span> : <span class="string">&#x27;#ccc&#x27;</span></span><br><span class="line">		<span class="title function_">drawLine</span>(x1, y1, x2, y2, w, c)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 数字</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">12</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">let</span> d = ((<span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>) / <span class="number">12</span>) * i - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span></span><br><span class="line">		<span class="keyword">const</span> x = <span class="number">105</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(d)</span><br><span class="line">		<span class="keyword">const</span> y = <span class="number">105</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(d)</span><br><span class="line">		<span class="title function_">drawText</span>(i, x, y)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 表针</span></span><br><span class="line">	context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span></span><br><span class="line">	<span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">	<span class="keyword">const</span> s = (time.<span class="title function_">getSeconds</span>() * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>) / <span class="number">60</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span></span><br><span class="line">	<span class="keyword">const</span> m = (time.<span class="title function_">getMinutes</span>() * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>) / <span class="number">60</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span></span><br><span class="line">	<span class="keyword">const</span> h = (time.<span class="title function_">getHours</span>() * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>) / <span class="number">12</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span></span><br><span class="line">	<span class="title function_">drawLine</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(h), <span class="number">50</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(h), <span class="number">7</span>)</span><br><span class="line">	<span class="title function_">drawLine</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">70</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(m), <span class="number">70</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(m), <span class="number">5</span>)</span><br><span class="line">	<span class="title function_">drawLine</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">90</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(s), <span class="number">90</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>(s), <span class="number">3</span>, <span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line">	context.<span class="title function_">restore</span>()</span><br><span class="line">	<span class="title function_">requestAnimationFrame</span>(drawClock)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawClock</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-25-53.png"></p>
<h4 id="案例-3：移动的小球"><a href="#案例-3：移动的小球" class="headerlink" title="案例 3：移动的小球"></a>案例 3：移动的小球</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 面向对象移动的小球</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">moveCircle</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">radom</span>(<span class="params">n</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() * n</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Ball</span> &#123;</span><br><span class="line">		<span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">radom</span>(<span class="number">580</span>) + <span class="number">60</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">radom</span>(<span class="number">580</span>) + <span class="number">60</span></span><br><span class="line">			<span class="comment">// this.x = 80</span></span><br><span class="line">			<span class="comment">// this.y = 80</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">radom</span>(<span class="number">50</span>) + <span class="number">10</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">c</span> = <span class="string">&#x27;#&#x27;</span> + <span class="built_in">parseInt</span>(<span class="title function_">radom</span>(<span class="number">0xffffff</span>)).<span class="title function_">toString</span>(<span class="number">16</span>)</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">xSpeed</span> = <span class="title function_">radom</span>(<span class="number">5</span>) + <span class="number">1</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">ySpeed</span> = <span class="title function_">radom</span>(<span class="number">5</span>) + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">			context.<span class="title function_">beginPath</span>()</span><br><span class="line">			context.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">r</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>)</span><br><span class="line">			context.<span class="property">fillStyle</span> = <span class="variable language_">this</span>.<span class="property">c</span></span><br><span class="line">			context.<span class="title function_">fill</span>()</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">show</span>()</span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">r</span> &gt;= w || <span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">r</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">xSpeed</span> = -<span class="variable language_">this</span>.<span class="property">xSpeed</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">xSpeed</span></span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">y</span> + <span class="variable language_">this</span>.<span class="property">r</span> &gt;= h || <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">r</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">ySpeed</span> = -<span class="variable language_">this</span>.<span class="property">ySpeed</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">ySpeed</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">let</span> w = <span class="number">700</span></span><br><span class="line">	<span class="keyword">let</span> h = <span class="number">700</span></span><br><span class="line">	<span class="keyword">let</span> arr = []</span><br><span class="line">	<span class="comment">// 循环添加生成的小球实例对象</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">		arr.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Ball</span>())</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 清除画布, 循环数组调用 run 方法</span></span><br><span class="line">		context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, w, h)</span><br><span class="line">		arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">			item.<span class="title function_">run</span>()</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;, <span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">moveCircle</span>()</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../../../../img/canvas基础/Snipaste_2022-10-24_12-31-49.png" style="zoom:50%;" />

<h4 id="案例-4：线性移动小球"><a href="#案例-4：线性移动小球" class="headerlink" title="案例 4：线性移动小球"></a>案例 4：线性移动小球</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 线性小球</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawLineCircle</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="title function_">radom</span> = (<span class="params">n</span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">random</span>() * n</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawCircle</span>(<span class="params">x, y, r, c = <span class="string">&#x27;red&#x27;</span></span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		context.<span class="property">fillStyle</span> = c</span><br><span class="line">		context.<span class="title function_">arc</span>(x, y, r, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>)</span><br><span class="line">		context.<span class="title function_">fill</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawLine</span>(<span class="params">x1, y1, x2, y2, c = <span class="string">&#x27;orange&#x27;</span>, w = <span class="number">1</span></span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		context.<span class="title function_">moveTo</span>(x1, y1)</span><br><span class="line">		context.<span class="title function_">lineTo</span>(x2, y2)</span><br><span class="line">		context.<span class="property">strokeStyle</span> = c</span><br><span class="line">		context.<span class="property">lineWidth</span> = w</span><br><span class="line">		context.<span class="title function_">stroke</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">drawText</span>(<span class="params">x, y, t = <span class="string">&#x27;hello&#x27;</span>, c = <span class="string">&#x27;green&#x27;</span>, f = <span class="string">&#x27;20&#x27;</span>, w = <span class="number">100</span></span>) &#123;</span><br><span class="line">		context.<span class="title function_">beginPath</span>()</span><br><span class="line">		context.<span class="property">textAlign</span> = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">		context.<span class="property">textBaseline</span> = <span class="string">&#x27;middle&#x27;</span></span><br><span class="line">		f = f &lt; <span class="number">15</span> ? <span class="number">15</span> : f</span><br><span class="line">		context.<span class="property">font</span> = <span class="string">`<span class="subst">$&#123;f&#125;</span>px sans-serif`</span></span><br><span class="line">		context.<span class="property">fillStyle</span> = c</span><br><span class="line">		context.<span class="title function_">fillText</span>(t, x, y, w)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">DrawLineCircle</span> &#123;</span><br><span class="line">		<span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">radom</span>(<span class="number">480</span>) + <span class="number">60</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">radom</span>(<span class="number">480</span>) + <span class="number">60</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">radom</span>(<span class="number">50</span>) + <span class="number">10</span></span><br><span class="line">			<span class="comment">// this.c = &#x27;#&#x27; + parseInt(radom(0xffffff)).toString(16)</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">c</span> = <span class="string">`rgb(<span class="subst">$&#123;radom(<span class="number">255</span>)&#125;</span>,<span class="subst">$&#123;radom(<span class="number">255</span>)&#125;</span>,<span class="subst">$&#123;radom(<span class="number">255</span>)&#125;</span>)`</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">xSpeed</span> = <span class="title function_">radom</span>(<span class="number">5</span>) + <span class="number">1</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">ySpeed</span> = <span class="title function_">radom</span>(<span class="number">5</span>) + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">show</span>(<span class="params">t</span>) &#123;</span><br><span class="line">			<span class="title function_">drawCircle</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">c</span>)</span><br><span class="line">			<span class="title function_">drawText</span>(<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">r</span>, t, <span class="variable language_">this</span>.<span class="property">c</span>, <span class="variable language_">this</span>.<span class="property">r</span> / <span class="number">2</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">move</span>(<span class="params">t</span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">show</span>(t)</span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">r</span> &gt;= w || <span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">r</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">xSpeed</span> = -<span class="variable language_">this</span>.<span class="property">xSpeed</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">xSpeed</span></span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">y</span> + <span class="variable language_">this</span>.<span class="property">r</span> &gt;= h || <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">r</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">ySpeed</span> = -<span class="variable language_">this</span>.<span class="property">ySpeed</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">ySpeed</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">const</span> w = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> - <span class="number">6</span></span><br><span class="line">	<span class="keyword">const</span> h = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> - <span class="number">6</span></span><br><span class="line">	canvas.<span class="property">width</span> = w</span><br><span class="line">	canvas.<span class="property">height</span> = h</span><br><span class="line">	<span class="keyword">let</span> arr = []</span><br><span class="line">	<span class="keyword">let</span> textArr = [<span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;ajax&#x27;</span>, <span class="string">&#x27;echars&#x27;</span>, <span class="string">&#x27;wechat&#x27;</span>, <span class="string">&#x27;git&#x27;</span>, <span class="string">&#x27;more&#x27;</span>]</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">const</span> ball = <span class="keyword">new</span> <span class="title class_">DrawLineCircle</span>()</span><br><span class="line">		arr.<span class="title function_">push</span>(ball)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, w, h)</span><br><span class="line">		arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">it, i</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="comment">// 找到每个小球的前一个，将结束位置设置为前一个小球的位置</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">				<span class="keyword">const</span> prev = arr[j]</span><br><span class="line">				<span class="keyword">const</span> now = arr[i]</span><br><span class="line">				<span class="title function_">drawLine</span>(now.<span class="property">x</span>, now.<span class="property">y</span>, prev.<span class="property">x</span>, prev.<span class="property">y</span>, now.<span class="property">c</span>, now.<span class="property">r</span> / <span class="number">10</span>)</span><br><span class="line">			&#125;</span><br><span class="line">			it.<span class="title function_">move</span>(textArr[i])</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;, <span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">drawLineCircle</span>()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-33-08.png"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://metabo6.github.io">随时奉陪</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://metabo6.github.io/posts/a90c89c3.html">https://metabo6.github.io/posts/a90c89c3.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://metabo6.github.io" target="_blank">随时奉陪</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Canvas/">Canvas</a></div><div class="post_share"><div class="social-share" data-image="/../../../../img/canvas%E5%9F%BA%E7%A1%80/Snipaste_2022-10-24_12-31-49.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/bbb2c1db.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly/2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SVN基础</div></div></a></div><div class="next-post pull-right"><a href="/posts/783ce8a9.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly/5.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">移动端适配</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly/index.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">随时奉陪</div><div class="author-info__description">向往自由，追求自由，找寻自由</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/metabo6"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-canvas-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">1. canvas 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Canvas-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">2. Canvas 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-canvas-%E5%85%83%E7%B4%A0"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 canvas 元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%B8%B2%E6%9F%93%E4%B8%8A%E4%B8%8B%E6%96%87-Thre-Rending-Context"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 渲染上下文(Thre Rending Context)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%A3%80%E6%B5%8B%E6%94%AF%E6%8C%81%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 检测支持性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BB%98%E5%88%B6%E5%BD%A2%E7%8A%B6"><span class="toc-number">3.</span> <span class="toc-text">3. 绘制形状</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2"><span class="toc-number">3.1.</span> <span class="toc-text">绘制矩形</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%BB%98%E5%88%B6%E8%B7%AF%E5%BE%84-path"><span class="toc-number">4.</span> <span class="toc-text">4. 绘制路径(path)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%BB%98%E5%88%B6%E7%BA%BF%E6%AE%B5"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 绘制线段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%BB%98%E5%88%B6%E4%B8%89%E8%A7%92%E5%BD%A2%E8%BE%B9%E6%A1%86"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 绘制三角形边框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E7%BB%98%E5%88%B6%E5%9C%86%E5%BC%A7"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 绘制圆弧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F%E5%92%8C%E9%A2%9C%E8%89%B2"><span class="toc-number">5.</span> <span class="toc-text">5. 添加样式和颜色</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Transparency-%E9%80%8F%E6%98%8E%E5%BA%A6"><span class="toc-number">5.1.</span> <span class="toc-text">Transparency(透明度)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#line-style"><span class="toc-number">5.2.</span> <span class="toc-text">line style</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lineCap-x3D-type"><span class="toc-number">5.3.</span> <span class="toc-text">lineCap &#x3D; type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lineJoin-x3D-type"><span class="toc-number">5.4.</span> <span class="toc-text">lineJoin &#x3D; type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E7%BA%BF"><span class="toc-number">5.5.</span> <span class="toc-text">虚线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC"><span class="toc-number">6.</span> <span class="toc-text">6. 绘制文本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text">文本添加样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BB%98%E5%88%B6%E5%9B%BE%E7%89%87"><span class="toc-number">7.</span> <span class="toc-text">7. 绘制图片</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%9B%BE%E7%89%87"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 直接创建图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E7%BB%98%E5%88%B6-img-%E6%A0%87%E7%AD%BE%E5%9B%BE%E7%89%87"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 绘制 img 标签图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E7%BC%A9%E6%94%BE%E5%9B%BE%E7%89%87"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 缩放图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E5%88%87%E7%89%87-slice"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 切片(slice)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%8A%B6%E6%80%81%E7%9A%84%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D"><span class="toc-number">8.</span> <span class="toc-text">8. 状态的保存和恢复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%8F%98%E5%BD%A2"><span class="toc-number">9.</span> <span class="toc-text">9. 变形</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-translate"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 translate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-rotate"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 rotate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-scale"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 scale</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%8A%A8%E7%94%BB"><span class="toc-number">10.</span> <span class="toc-text">10. 动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%8A%A8%E7%94%BB"><span class="toc-number">10.1.</span> <span class="toc-text">控制动画</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1%EF%BC%9A%E5%A4%AA%E9%98%B3%E7%B3%BB"><span class="toc-number">10.1.1.</span> <span class="toc-text">案例 1：太阳系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-2%EF%BC%9A%E6%97%B6%E9%92%9F%E8%B5%B0%E5%8A%A8"><span class="toc-number">10.1.2.</span> <span class="toc-text">案例 2：时钟走动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-3%EF%BC%9A%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%B0%8F%E7%90%83"><span class="toc-number">10.1.3.</span> <span class="toc-text">案例 3：移动的小球</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-4%EF%BC%9A%E7%BA%BF%E6%80%A7%E7%A7%BB%E5%8A%A8%E5%B0%8F%E7%90%83"><span class="toc-number">10.1.4.</span> <span class="toc-text">案例 4：线性移动小球</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/a5ae354f.html" title="数组、字符串常用方法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/React%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%80%BB%E7%BB%93/js.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数组、字符串常用方法"/></a><div class="content"><a class="title" href="/posts/a5ae354f.html" title="数组、字符串常用方法">数组、字符串常用方法</a><time datetime="2022-11-24T02:24:11.000Z" title="发表于 2022-11-24 10:24:11">2022-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b0de96e1.html" title="CSS 总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/React%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%80%BB%E7%BB%93/css.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS 总结"/></a><div class="content"><a class="title" href="/posts/b0de96e1.html" title="CSS 总结">CSS 总结</a><time datetime="2022-11-24T02:22:36.000Z" title="发表于 2022-11-24 10:22:36">2022-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f1991798.html" title="Git 总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/React%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%80%BB%E7%BB%93/git.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 总结"/></a><div class="content"><a class="title" href="/posts/f1991798.html" title="Git 总结">Git 总结</a><time datetime="2022-11-24T02:22:36.000Z" title="发表于 2022-11-24 10:22:36">2022-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50b39724.html" title="HTML 总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/React%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%80%BB%E7%BB%93/HTML.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTML 总结"/></a><div class="content"><a class="title" href="/posts/50b39724.html" title="HTML 总结">HTML 总结</a><time datetime="2022-11-24T02:22:36.000Z" title="发表于 2022-11-24 10:22:36">2022-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/588ad959.html" title="JS 基础总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../../../../img/React%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%80%BB%E7%BB%93/js.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS 基础总结"/></a><div class="content"><a class="title" href="/posts/588ad959.html" title="JS 基础总结">JS 基础总结</a><time datetime="2022-11-24T02:22:36.000Z" title="发表于 2022-11-24 10:22:36">2022-11-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 随时奉陪</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script src="/js/weather.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>